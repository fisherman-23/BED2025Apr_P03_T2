<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chats</title>
  <link rel="stylesheet" href="global.css" />
  <link rel="stylesheet" href="/buddy-system/style.css" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/buddy-system/chat.js" defer></script>
</head>

<body>

  <div id="popup"
    class="fixed z-[9999] inset-0 hidden bg-black bg-opacity-50 flex items-center justify-center backdrop-blur-lg">
    <div class="popup-content-1 hidden relative bg-white p-8 rounded-2xl shadow-lg w-2/3 h-4/5 flex flex-col"
      id="popupContent1">
      <h2 class="text-2xl font-semibold mb-4">Create New Chat</h2>
      <div id="friendsList" class="flex flex-col items-center gap-2"></div>
      <button class=" absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none" id="close-btn-1">
        <svg xmlns="http://www.w3.org/2000/svg" width="37" height="37" fill="none" viewBox="0 0 37 37">
          <path stroke="#000" stroke-linecap="round" stroke-width="2" d="m27.75 9.25-18.5 18.5m18.5 0L9.25 9.25" />
        </svg>
      </button>
    </div>
    <div
      class="popup-content-2 hidden relative bg-white p-8 rounded-2xl shadow-lg w-2/3 h-4/5 flex flex-col items-center justify-center gap-8"
      id="popupContent2">
      <div>
        <h2 class="text-2xl font-semibold mb-4">Chat Information</h2>

        <h3 class="font-normal text-xl mt-4">This is a conversation between you and <span id="recipient"></span></h3>
        <h3 class="font-normal text-xl mt-4">This chat was created on <span id="creation-date"></span></h3>
      </div>
      <button type="submit" class="bg-[#D7E961] px-6 py-2 rounded-2xl shadow-md text-lg font-semibold">
        <div class="flex flex-row items-center gap-2 justify-center">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M31 14H27.51L21.5725 5.82375C21.3926 5.57671 21.1584 5.3742 20.888 5.23175C20.6176 5.08931 20.3182 5.01072 20.0127 5.00203C19.7072 4.99334 19.4038 5.05477 19.1258 5.18162C18.8477 5.30846 18.6024 5.49734 18.4088 5.73375L16.8025 7.59625L16.7775 7.625C16.6844 7.74192 16.5662 7.83635 16.4316 7.90125C16.297 7.96615 16.1494 7.99985 16 7.99985C15.8506 7.99985 15.703 7.96615 15.5684 7.90125C15.4338 7.83635 15.3156 7.74192 15.2225 7.625L15.1975 7.59625L13.5913 5.73375C13.3976 5.49734 13.1523 5.30846 12.8742 5.18162C12.5962 5.05477 12.2928 4.99334 11.9873 5.00203C11.6818 5.01072 11.3824 5.08931 11.112 5.23175C10.8416 5.3742 10.6074 5.57671 10.4275 5.82375L4.49 14H1C0.734784 14 0.48043 14.1054 0.292893 14.2929C0.105357 14.4804 0 14.7348 0 15C0 15.2652 0.105357 15.5196 0.292893 15.7071C0.48043 15.8946 0.734784 16 1 16H31C31.2652 16 31.5196 15.8946 31.7071 15.7071C31.8946 15.5196 32 15.2652 32 15C32 14.7348 31.8946 14.4804 31.7071 14.2929C31.5196 14.1054 31.2652 14 31 14ZM12.0425 7L12.0662 7.02875L13.6725 8.89C13.9538 9.23591 14.3087 9.51476 14.7113 9.70628C15.1139 9.89781 15.5541 9.99719 16 9.99719C16.4459 9.99719 16.8861 9.89781 17.2887 9.70628C17.6913 9.51476 18.0462 9.23591 18.3275 8.89L19.9338 7.02875C19.9412 7.01875 19.9462 7.01 19.955 7L25.0375 14H6.96125L12.0425 7ZM22.5 18C21.3933 18.0002 20.3254 18.4083 19.5006 19.1462C18.6757 19.8841 18.1517 20.9001 18.0287 22H13.9712C13.848 20.9011 13.3244 19.8861 12.5005 19.1486C11.6766 18.4111 10.61 18.0028 9.5042 18.0016C8.39843 18.0004 7.33092 18.4064 6.50539 19.1421C5.67985 19.8777 5.1541 20.8916 5.02844 21.9902C4.90279 23.0889 5.18604 24.1953 5.82413 25.0984C6.46223 26.0015 7.4105 26.638 8.48799 26.8865C9.56548 27.135 10.6967 26.9781 11.6659 26.4457C12.6351 25.9133 13.3743 25.0427 13.7425 24H18.2575C18.5325 24.7778 19.016 25.4651 19.6553 25.9866C20.2945 26.5082 21.0648 26.844 21.8819 26.9573C22.6991 27.0707 23.5317 26.9572 24.2888 26.6293C25.0458 26.3014 25.6981 25.7716 26.1744 25.098C26.6507 24.4244 26.9327 23.6328 26.9895 22.8098C27.0463 21.9867 26.8757 21.1639 26.4964 20.4313C26.1172 19.6986 25.5438 19.0843 24.839 18.6555C24.1341 18.2267 23.325 18 22.5 18ZM9.5 25C9.00555 25 8.5222 24.8534 8.11107 24.5787C7.69995 24.304 7.37952 23.9135 7.1903 23.4567C7.00108 22.9999 6.95157 22.4972 7.04804 22.0123C7.1445 21.5273 7.3826 21.0819 7.73223 20.7322C8.08186 20.3826 8.52732 20.1445 9.01227 20.048C9.49723 19.9516 9.99989 20.0011 10.4567 20.1903C10.9135 20.3795 11.304 20.7 11.5787 21.1111C11.8534 21.5222 12 22.0055 12 22.5C12 22.8283 11.9353 23.1534 11.8097 23.4567C11.6841 23.76 11.4999 24.0356 11.2678 24.2678C11.0356 24.4999 10.76 24.6841 10.4567 24.8097C10.1534 24.9353 9.8283 25 9.5 25ZM22.5 25C22.0055 25 21.5222 24.8534 21.1111 24.5787C20.7 24.304 20.3795 23.9135 20.1903 23.4567C20.0011 22.9999 19.9516 22.4972 20.048 22.0123C20.1445 21.5273 20.3826 21.0819 20.7322 20.7322C21.0819 20.3826 21.5273 20.1445 22.0123 20.048C22.4972 19.9516 22.9999 20.0011 23.4567 20.1903C23.9135 20.3795 24.304 20.7 24.5787 21.1111C24.8534 21.5222 25 22.0055 25 22.5C25 23.163 24.7366 23.7989 24.2678 24.2678C23.7989 24.7366 23.163 25 22.5 25Z"
              fill="#343330" />
          </svg>
          <p>Report Conversation</p>
        </div>

      </button>
      <button class=" absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none" id="close-btn-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="37" height="37" fill="none" viewBox="0 0 37 37">
          <path stroke="#000" stroke-linecap="round" stroke-width="2" d="m27.75 9.25-18.5 18.5m18.5 0L9.25 9.25" />
        </svg>
      </button>
    </div>
  </div>
  <div class="flex flex-col h-screen">
    <nav class="navbar">
      <a href="index.html"><img src="/assets/Logo.svg" alt="Logo"></a>
      <div class="nav-icons">
        <a><img src="/assets/icons/NAV-House.svg" alt="home"></a>
        <a><img src="/assets/icons/NAV-Hospital.svg" alt="medical"></a>
        <a><img src="/assets/icons/NAV-Tram.svg" alt="transport"></a>
        <a><img src="/assets/icons/NAV-exercise.svg" alt="exercise"></a>
        <a><img src="/assets/icons/NAV-calendar.svg" alt="events"></a>
        <a><img src="/assets/icons/NAV-users.svg" alt="user"></a>
      </div>
      <div class="profile-icon">
        <img src="/assets/images/elderlyPFP.png" alt="Profile Picture">
      </div>
    </nav>
    <div class="h-full flex px-16 py-10 row">
      <div class="flex flex-col w-2/5">
        <h1 class="text-4xl font-bold">Your chats</h1>
        <!--Search bar-->
        <div class="flex mt-4">
          <input type="text" id="searchInput" placeholder="Search for existing chats..."
            class="border-2 border-slate rounded-2xl p-2 w-full" />
          <button id="searchButton"
            class="ml-2 bg-transparent border-slate border-2 px-4 py-2 rounded-2xl">Search</button>

        </div>
        <!--Search chips-->
        <div id="searchChips" class="flex flex-row mt-2 gap-2">
          <!-- Search chips will be dynamically added here -->
          <div class="px-6 py-2 bg-blue-200 rounded-2xl">All</div>
          <div class="px-6 py-2 bg-lime-300 rounded-2xl">Read</div>
          <div class="px-6 py-2 bg-indigo-500 rounded-2xl text-white">Unread</div>
        </div>
        <!--Chat List-->
        <div id="chatList" class="mt-4 flex flex-col gap-2">
          <!-- <div class="flex flex-row bg-gray-100 p-4 rounded-2xl items-center gap-4">
            <img src="/assets/images/elderlyPFP.png" alt="Friend's Profile Picture"
              class="w-16 h-16 rounded-full object-cover">
            <div class="flex flex-row items-center w-full">
              <div class="flex flex-col">
                <p class="text-lg font-semibold">John Doe</p>
                <p class="text-sm text-gray-500">Hello want to meet for lunch @ Jurong Point tmr?</p>
              </div>
              <p class="text-sm text-gray-400 ml-auto self-end">Read</p>
            </div>
          </div> -->

          <!-- <div class="flex flex-row bg-gray-100 p-4 rounded-2xl items-center gap-4">
            <img src="/assets/images/elderlyPFP.png" alt="Friend's Profile Picture"
              class="w-16 h-16 rounded-full object-cover">
            <div class="flex flex-row items-center w-full">
              <div class="flex flex-col">
                <p class="text-lg font-semibold">John Doe</p>
                <p class="text-sm text-gray-500">Hello want to meet for lunch @ Jurong Point tmr?</p>
              </div>
              <p class="text-sm text-gray-400 ml-auto self-end">11:44 PM</p>
            </div>
          </div> -->
        </div>
        <div class="flex flex-col items-center">
          <button id="createChatButton" class="mt-4 bg-[#D7E961] px-6 py-2 rounded-2xl shadow-md text-lg font-semibold"
            onclick="openPopup('popupContent1')">Create New Chat</button>
        </div>


        <!--Hot Action Buttons - Fixed to Bottom-->
        <div class="fixed bottom-0 left-0 w-full bg-white px-16 py-8 z-40">
          <div class="flex justify-start gap-4">
            <button class="py-4 px-6 bg-[#D7E961] rounded-2xl shadow-md" onclick="location.href='/social.html'">
              <div class="flex flex-row items-center gap-2">
                <img src="/assets/icons/NAV-users.svg" alt="Social Icon" class="w-8 h-8 mr-2">
                <p class="text-lg text-center">Socials</p>
              </div>
            </button>
            <button class="py-4 px-6 bg-[#D7E961] rounded-2xl shadow-md">
              <div class="flex flex-row items-center gap-2">
                <img src="/assets/icons/pencil.svg" alt="Pencil Icon" class="w-8 h-8 mr-2">
                <p class="text-lg text-center">Edit Profile</p>
              </div>
            </button>
          </div>
        </div>

      </div>
      <div class="flex flex-col w-3/5 ml-10 bg-gray-100 w-full h-[80vh] p-8 rounded-2xl z-50">
        <div class="flex flex-row gap-4" id="chatHeader">
          <h2 class="text-xl font-semibold" id="chatHeaderName"></h2>
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"
            class="hidden cursor-pointer" id="infoButton">
            <path
              d="M16 3C13.4288 3 10.9154 3.76244 8.77759 5.1909C6.63975 6.61935 4.97351 8.64968 3.98957 11.0251C3.00563 13.4006 2.74819 16.0144 3.2498 18.5362C3.75141 21.0579 4.98953 23.3743 6.80762 25.1924C8.6257 27.0105 10.9421 28.2486 13.4638 28.7502C15.9856 29.2518 18.5995 28.9944 20.9749 28.0104C23.3503 27.0265 25.3807 25.3603 26.8091 23.2224C28.2376 21.0846 29 18.5712 29 16C28.9964 12.5533 27.6256 9.24882 25.1884 6.81163C22.7512 4.37445 19.4467 3.00364 16 3ZM16 27C13.8244 27 11.6977 26.3549 9.88873 25.1462C8.07979 23.9375 6.66989 22.2195 5.83733 20.2095C5.00477 18.1995 4.78693 15.9878 5.21137 13.854C5.63581 11.7202 6.68345 9.7602 8.22183 8.22183C9.76021 6.68345 11.7202 5.6358 13.854 5.21136C15.9878 4.78692 18.1995 5.00476 20.2095 5.83733C22.2195 6.66989 23.9375 8.07979 25.1462 9.88873C26.3549 11.6977 27 13.8244 27 16C26.9967 18.9164 25.8367 21.7123 23.7745 23.7745C21.7123 25.8367 18.9164 26.9967 16 27ZM18 22C18 22.2652 17.8946 22.5196 17.7071 22.7071C17.5196 22.8946 17.2652 23 17 23C16.4696 23 15.9609 22.7893 15.5858 22.4142C15.2107 22.0391 15 21.5304 15 21V16C14.7348 16 14.4804 15.8946 14.2929 15.7071C14.1054 15.5196 14 15.2652 14 15C14 14.7348 14.1054 14.4804 14.2929 14.2929C14.4804 14.1054 14.7348 14 15 14C15.5304 14 16.0391 14.2107 16.4142 14.5858C16.7893 14.9609 17 15.4696 17 16V21C17.2652 21 17.5196 21.1054 17.7071 21.2929C17.8946 21.4804 18 21.7348 18 22ZM14 10.5C14 10.2033 14.088 9.91332 14.2528 9.66665C14.4176 9.41997 14.6519 9.22771 14.926 9.11418C15.2001 9.00065 15.5017 8.97094 15.7926 9.02882C16.0836 9.0867 16.3509 9.22956 16.5607 9.43934C16.7704 9.64912 16.9133 9.91639 16.9712 10.2074C17.0291 10.4983 16.9994 10.7999 16.8858 11.074C16.7723 11.3481 16.58 11.5824 16.3334 11.7472C16.0867 11.912 15.7967 12 15.5 12C15.1022 12 14.7206 11.842 14.4393 11.5607C14.158 11.2794 14 10.8978 14 10.5Z"
              fill="#343330" />
          </svg>

        </div>
        <h2 class="w-full text-center" id="chatHeaderMessage">Click on a chat to start</h2>

        <div id="chatMessages" class="flex flex-col mt-4 h-full overflow-y-scroll">
          <!-- Chat messages will be dynamically added here -->
          <!-- <div class="bg-white p-4 rounded-2xl mb-2">
            <p class="text-gray-700">Hello want to meet for lunch @ Jurong Point tmr?</p>
            <p class="text-sm text-gray-400 text-right">11:44 PM</p>
          </div>
          <div class="bg-blue-100 p-4 rounded-2xl mb-2 self-end">
            <p class="text-gray-700">Sure! What time?</p>
            <p class="text-sm text-gray-400 text-right">11:45 PM</p>
          </div> -->
        </div>
        <div class="flex flex-row mt-4 hidden" id="messageInputContainer">
          <input type="text" id="messageInput" placeholder="Type your message here..."
            class="border-2 border-slate rounded-2xl p-2 w-full" />
          <button id="sendButton" class="ml-2 bg-transparent border-slate border-2 px-4 py-2 rounded-2xl">Send</button>
        </div>


      </div>

      <!-- <form id="buddyForm">
    <h1>Buddy System</h1>
    <label for="buddyName">Buddy UUID:</label>
    <input type="text" id="uuid" name="uuid" required />

    <button type="submit" id="button">Add Buddy</button>
  </form>
  <div id="incomingRequests"></div>
  <div id="outgoingRequests"></div>

  <form id="acceptRejectForm">
    <h2>Accept/Reject Requests</h2>
    <label for="requestId">Request ID:</label>
    <input type="text" id="requestId" name="requestId" required />
    <button type="button" id="acceptButton">Accept</button>
    <button type="button" id="rejectButton">Reject</button>
  </form>

  <div id="friendsList">


    <div id="profileStatus"></div>

    <form id="matchProfileForm">
      <textarea name="bio" placeholder="bio"></textarea><br>

      <label><input type="checkbox" name="likesHiking" /> Hiking</label><br>
      <label><input type="checkbox" name="likesGardening" /> Gardening</label><br>
      <label><input type="checkbox" name="likesBoardGames" /> Board Games</label><br>
      <label><input type="checkbox" name="likesSinging" /> Singing</label><br>
      <label><input type="checkbox" name="likesReading" /> Reading</label><br>
      <label><input type="checkbox" name="likesWalking" /> Walking</label><br>
      <label><input type="checkbox" name="likesCooking" /> Cooking</label><br>
      <label><input type="checkbox" name="likesMovies" /> Movies</label><br>
      <label><input type="checkbox" name="likesTaiChi" /> Tai Chi</label><br>

      <button type="button" id="createProfileBtn">Create Profile</button>
      <button type="button" id="updateProfileBtn">Update Profile</button>
    </form>

    <button id="checkProfileBtn">Check Profile Exists</button>
    <button id="loadPotentialBtn">Load Potential Matches</button>

    <div id="potentialMatches"></div> -->


</body>

</html>