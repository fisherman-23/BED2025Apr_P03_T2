<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chats</title>
  <link rel="stylesheet" href="global.css" />
  <link rel="stylesheet" href="/buddy-system/style.css" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/buddy-system/chat.js" defer></script>
</head>

<body>

  <div id="popup"
    class="fixed z-[9999] inset-0 hidden bg-black bg-opacity-50 flex items-center justify-center backdrop-blur-lg">
    <div class="popup-content-1 hidden relative bg-white p-8 rounded-2xl shadow-lg w-2/3 h-4/5 flex flex-col"
      id="popupContent1">
      <h2 class="text-2xl font-semibold mb-4">Create New Chat</h2>
      <p class="pb-4">Select a friend from this list to start a conversation with </p>
      <div id="friendsList" class="flex flex-col items-center gap-2"></div>
      <button class=" absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none" id="close-btn-1">
        <svg xmlns="http://www.w3.org/2000/svg" width="37" height="37" fill="none" viewBox="0 0 37 37">
          <path stroke="#000" stroke-linecap="round" stroke-width="2" d="m27.75 9.25-18.5 18.5m18.5 0L9.25 9.25" />
        </svg>
      </button>
    </div>
    <div
      class="popup-content-2 hidden relative bg-white p-8 rounded-2xl shadow-lg w-2/3 h-4/5 flex flex-col items-center justify-center gap-8"
      id="popupContent2">
      <div>
        <h2 class="text-2xl font-semibold mb-4">Chat Information</h2>

        <h3 class="font-normal text-xl mt-4">This is a conversation between you and <span id="recipient"></span></h3>
        <h3 class="font-normal text-xl mt-4">This chat was created on <span id="creation-date"></span></h3>
      </div>
      <!-- <button type="submit" class="bg-[#D7E961] px-6 py-2 rounded-2xl shadow-md text-lg font-semibold">
        <div class="flex flex-row items-center gap-2 justify-center">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M31 14H27.51L21.5725 5.82375C21.3926 5.57671 21.1584 5.3742 20.888 5.23175C20.6176 5.08931 20.3182 5.01072 20.0127 5.00203C19.7072 4.99334 19.4038 5.05477 19.1258 5.18162C18.8477 5.30846 18.6024 5.49734 18.4088 5.73375L16.8025 7.59625L16.7775 7.625C16.6844 7.74192 16.5662 7.83635 16.4316 7.90125C16.297 7.96615 16.1494 7.99985 16 7.99985C15.8506 7.99985 15.703 7.96615 15.5684 7.90125C15.4338 7.83635 15.3156 7.74192 15.2225 7.625L15.1975 7.59625L13.5913 5.73375C13.3976 5.49734 13.1523 5.30846 12.8742 5.18162C12.5962 5.05477 12.2928 4.99334 11.9873 5.00203C11.6818 5.01072 11.3824 5.08931 11.112 5.23175C10.8416 5.3742 10.6074 5.57671 10.4275 5.82375L4.49 14H1C0.734784 14 0.48043 14.1054 0.292893 14.2929C0.105357 14.4804 0 14.7348 0 15C0 15.2652 0.105357 15.5196 0.292893 15.7071C0.48043 15.8946 0.734784 16 1 16H31C31.2652 16 31.5196 15.8946 31.7071 15.7071C31.8946 15.5196 32 15.2652 32 15C32 14.7348 31.8946 14.4804 31.7071 14.2929C31.5196 14.1054 31.2652 14 31 14ZM12.0425 7L12.0662 7.02875L13.6725 8.89C13.9538 9.23591 14.3087 9.51476 14.7113 9.70628C15.1139 9.89781 15.5541 9.99719 16 9.99719C16.4459 9.99719 16.8861 9.89781 17.2887 9.70628C17.6913 9.51476 18.0462 9.23591 18.3275 8.89L19.9338 7.02875C19.9412 7.01875 19.9462 7.01 19.955 7L25.0375 14H6.96125L12.0425 7ZM22.5 18C21.3933 18.0002 20.3254 18.4083 19.5006 19.1462C18.6757 19.8841 18.1517 20.9001 18.0287 22H13.9712C13.848 20.9011 13.3244 19.8861 12.5005 19.1486C11.6766 18.4111 10.61 18.0028 9.5042 18.0016C8.39843 18.0004 7.33092 18.4064 6.50539 19.1421C5.67985 19.8777 5.1541 20.8916 5.02844 21.9902C4.90279 23.0889 5.18604 24.1953 5.82413 25.0984C6.46223 26.0015 7.4105 26.638 8.48799 26.8865C9.56548 27.135 10.6967 26.9781 11.6659 26.4457C12.6351 25.9133 13.3743 25.0427 13.7425 24H18.2575C18.5325 24.7778 19.016 25.4651 19.6553 25.9866C20.2945 26.5082 21.0648 26.844 21.8819 26.9573C22.6991 27.0707 23.5317 26.9572 24.2888 26.6293C25.0458 26.3014 25.6981 25.7716 26.1744 25.098C26.6507 24.4244 26.9327 23.6328 26.9895 22.8098C27.0463 21.9867 26.8757 21.1639 26.4964 20.4313C26.1172 19.6986 25.5438 19.0843 24.839 18.6555C24.1341 18.2267 23.325 18 22.5 18ZM9.5 25C9.00555 25 8.5222 24.8534 8.11107 24.5787C7.69995 24.304 7.37952 23.9135 7.1903 23.4567C7.00108 22.9999 6.95157 22.4972 7.04804 22.0123C7.1445 21.5273 7.3826 21.0819 7.73223 20.7322C8.08186 20.3826 8.52732 20.1445 9.01227 20.048C9.49723 19.9516 9.99989 20.0011 10.4567 20.1903C10.9135 20.3795 11.304 20.7 11.5787 21.1111C11.8534 21.5222 12 22.0055 12 22.5C12 22.8283 11.9353 23.1534 11.8097 23.4567C11.6841 23.76 11.4999 24.0356 11.2678 24.2678C11.0356 24.4999 10.76 24.6841 10.4567 24.8097C10.1534 24.9353 9.8283 25 9.5 25ZM22.5 25C22.0055 25 21.5222 24.8534 21.1111 24.5787C20.7 24.304 20.3795 23.9135 20.1903 23.4567C20.0011 22.9999 19.9516 22.4972 20.048 22.0123C20.1445 21.5273 20.3826 21.0819 20.7322 20.7322C21.0819 20.3826 21.5273 20.1445 22.0123 20.048C22.4972 19.9516 22.9999 20.0011 23.4567 20.1903C23.9135 20.3795 24.304 20.7 24.5787 21.1111C24.8534 21.5222 25 22.0055 25 22.5C25 23.163 24.7366 23.7989 24.2678 24.2678C23.7989 24.7366 23.163 25 22.5 25Z"
              fill="#343330" />
          </svg>
          <p>Report Conversation</p>
        </div>

      </button> -->
      <button class=" absolute top-4 right-4 text-gray-500 hover:text-gray-700 focus:outline-none" id="close-btn-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="37" height="37" fill="none" viewBox="0 0 37 37">
          <path stroke="#000" stroke-linecap="round" stroke-width="2" d="m27.75 9.25-18.5 18.5m18.5 0L9.25 9.25" />
        </svg>
      </button>
    </div>
  </div>
  <div class="flex flex-col h-screen">
    <nav class="navbar">
      <a href="index.html"><img src="/assets/Logo.svg" alt="Logo"></a>
      <div class="nav-icons">
        <a><img src="/assets/icons/NAV-House.svg" alt="home"></a>
        <a><img src="/assets/icons/NAV-Hospital.svg" alt="medical"></a>
        <a><img src="/assets/icons/NAV-Tram.svg" alt="transport"></a>
        <a><img src="/assets/icons/NAV-exercise.svg" alt="exercise"></a>
        <a><img src="/assets/icons/NAV-calendar.svg" alt="events"></a>
        <a><img src="/assets/icons/NAV-users.svg" alt="user"></a>
      </div>
      <div class="profile-icon">
        <img src="/assets/images/defaultPFP.png" alt="Profile Picture">
      </div>
    </nav>
    <div class="h-full flex px-16 py-10 row">
      <div class="flex flex-col w-2/5">
        <h1 class="text-4xl font-bold">Your chats</h1>
        <!--Search bar-->
        <div class="flex mt-4">
          <input type="text" id="searchInput" placeholder="Search for existing chats..."
            class="border-2 border-slate rounded-2xl p-2 w-full" />
          <button id="searchButton"
            class="ml-2 bg-transparent border-slate border-2 px-4 py-2 rounded-2xl">Search</button>

        </div>

        <!--Chat List-->
        <div id="chatList" class="mt-4 flex flex-col gap-2">
          <!-- <div class="flex flex-row bg-gray-100 p-4 rounded-2xl items-center gap-4">
            <img src="/assets/images/elderlyPFP.png" alt="Friend's Profile Picture"
              class="w-16 h-16 rounded-full object-cover">
            <div class="flex flex-row items-center w-full">
              <div class="flex flex-col">
                <p class="text-lg font-semibold">John Doe</p>
                <p class="text-sm text-gray-500">Hello want to meet for lunch @ Jurong Point tmr?</p>
              </div>
              <p class="text-sm text-gray-400 ml-auto self-end">Read</p>
            </div>
          </div> -->

          <!-- <div class="flex flex-row bg-gray-100 p-4 rounded-2xl items-center gap-4">
            <img src="/assets/images/elderlyPFP.png" alt="Friend's Profile Picture"
              class="w-16 h-16 rounded-full object-cover">
            <div class="flex flex-row items-center w-full">
              <div class="flex flex-col">
                <p class="text-lg font-semibold">John Doe</p>
                <p class="text-sm text-gray-500">Hello want to meet for lunch @ Jurong Point tmr?</p>
              </div>
              <p class="text-sm text-gray-400 ml-auto self-end">11:44 PM</p>
            </div>
          </div> -->
        </div>
        <div class="flex flex-col items-center">
          <button id="createChatButton" class="mt-4 bg-[#D7E961] px-6 py-2 rounded-2xl shadow-md text-lg font-semibold"
            onclick="openPopup('popupContent1')">Create New Chat</button>
        </div>


        <!--Hot Action Buttons - Fixed to Bottom-->
        <div class="fixed bottom-0 left-0 w-full bg-white px-16 py-8 z-40">
          <div class="flex justify-start gap-4">
            <button class="py-4 px-6 bg-[#D7E961] rounded-2xl shadow-md" onclick="location.href='/social.html'">
              <div class="flex flex-row items-center gap-2">
                <img src="/assets/icons/NAV-users.svg" alt="Social Icon" class="w-8 h-8 mr-2">
                <p class="text-lg text-center">Socials</p>
              </div>
            </button>

          </div>
        </div>

      </div>
      <div class="flex flex-col w-3/5 ml-10 bg-gray-100 w-full h-[80vh] p-8 rounded-2xl z-50">
        <div class="flex flex-row gap-4" id="chatHeader">
          <h2 class="text-xl font-semibold" id="chatHeaderName"></h2>
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"
            class="hidden cursor-pointer" id="infoButton">
            <path
              d="M16 3C13.4288 3 10.9154 3.76244 8.77759 5.1909C6.63975 6.61935 4.97351 8.64968 3.98957 11.0251C3.00563 13.4006 2.74819 16.0144 3.2498 18.5362C3.75141 21.0579 4.98953 23.3743 6.80762 25.1924C8.6257 27.0105 10.9421 28.2486 13.4638 28.7502C15.9856 29.2518 18.5995 28.9944 20.9749 28.0104C23.3503 27.0265 25.3807 25.3603 26.8091 23.2224C28.2376 21.0846 29 18.5712 29 16C28.9964 12.5533 27.6256 9.24882 25.1884 6.81163C22.7512 4.37445 19.4467 3.00364 16 3ZM16 27C13.8244 27 11.6977 26.3549 9.88873 25.1462C8.07979 23.9375 6.66989 22.2195 5.83733 20.2095C5.00477 18.1995 4.78693 15.9878 5.21137 13.854C5.63581 11.7202 6.68345 9.7602 8.22183 8.22183C9.76021 6.68345 11.7202 5.6358 13.854 5.21136C15.9878 4.78692 18.1995 5.00476 20.2095 5.83733C22.2195 6.66989 23.9375 8.07979 25.1462 9.88873C26.3549 11.6977 27 13.8244 27 16C26.9967 18.9164 25.8367 21.7123 23.7745 23.7745C21.7123 25.8367 18.9164 26.9967 16 27ZM18 22C18 22.2652 17.8946 22.5196 17.7071 22.7071C17.5196 22.8946 17.2652 23 17 23C16.4696 23 15.9609 22.7893 15.5858 22.4142C15.2107 22.0391 15 21.5304 15 21V16C14.7348 16 14.4804 15.8946 14.2929 15.7071C14.1054 15.5196 14 15.2652 14 15C14 14.7348 14.1054 14.4804 14.2929 14.2929C14.4804 14.1054 14.7348 14 15 14C15.5304 14 16.0391 14.2107 16.4142 14.5858C16.7893 14.9609 17 15.4696 17 16V21C17.2652 21 17.5196 21.1054 17.7071 21.2929C17.8946 21.4804 18 21.7348 18 22ZM14 10.5C14 10.2033 14.088 9.91332 14.2528 9.66665C14.4176 9.41997 14.6519 9.22771 14.926 9.11418C15.2001 9.00065 15.5017 8.97094 15.7926 9.02882C16.0836 9.0867 16.3509 9.22956 16.5607 9.43934C16.7704 9.64912 16.9133 9.91639 16.9712 10.2074C17.0291 10.4983 16.9994 10.7999 16.8858 11.074C16.7723 11.3481 16.58 11.5824 16.3334 11.7472C16.0867 11.912 15.7967 12 15.5 12C15.1022 12 14.7206 11.842 14.4393 11.5607C14.158 11.2794 14 10.8978 14 10.5Z"
              fill="#343330" />
          </svg>

        </div>
        <h2 class="w-full text-center" id="chatHeaderMessage">Click on a chat to start</h2>

        <div id="chatMessages" class="flex flex-col mt-4 h-full overflow-y-scroll">
          <!-- Chat messages will be dynamically added here -->
          <!-- <div class="bg-white p-4 rounded-2xl mb-2">
            <p class="text-gray-700">Hello want to meet for lunch @ Jurong Point tmr?</p>
            <p class="text-sm text-gray-400 text-right">11:44 PM</p>
          </div>
          <div class="bg-blue-100 p-4 rounded-2xl mb-2 self-end">
            <p class="text-gray-700">Sure! What time?</p>
            <p class="text-sm text-gray-400 text-right">11:45 PM</p>
          </div> -->
        </div>
        <p class="hidden" id="smartReplyStatus">Generating smart reply...</p>

        <div class="flex flex-row mt-2 hidden" id="messageInputContainer">

          <input type="text" id="messageInput" placeholder="Type your message here..."
            class="border-2 border-slate rounded-2xl p-2 w-full" />
          <button id="sendButton"
            class="ml-2 bg-transparent border-slate border-2 px-4 py-2 rounded-2xl hover:bg-gray-200">Send</button>
          <button id="smartReplyButton"
            class="ml-2 bg-transparent border-slate border-2 px-4 py-2 rounded-2xl hover:bg-gray-200">
            <div class="flex flex-row items-center gap-2">
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M24.6977 16.1325L18.2502 13.75L15.8752 7.2975C15.7346 6.91541 15.4801 6.58566 15.1461 6.35273C14.8122 6.11981 14.4149 5.99492 14.0077 5.99492C13.6005 5.99492 13.2032 6.11981 12.8692 6.35273C12.5353 6.58566 12.2808 6.91541 12.1402 7.2975L9.7502 13.75L3.2977 16.125C2.91561 16.2656 2.58586 16.5201 2.35293 16.854C2.12001 17.188 1.99512 17.5853 1.99512 17.9925C1.99512 18.3997 2.12001 18.797 2.35293 19.131C2.58586 19.4649 2.91561 19.7194 3.2977 19.86L9.7502 22.25L12.1252 28.7025C12.2658 29.0846 12.5203 29.4143 12.8542 29.6473C13.1882 29.8802 13.5855 30.0051 13.9927 30.0051C14.3999 30.0051 14.7972 29.8802 15.1311 29.6473C15.4651 29.4143 15.7196 29.0846 15.8602 28.7025L18.2502 22.25L24.7027 19.875C25.0848 19.7344 25.4145 19.4799 25.6475 19.146C25.8804 18.812 26.0053 18.4147 26.0053 18.0075C26.0053 17.6003 25.8804 17.203 25.6475 16.869C25.4145 16.5351 25.0848 16.2806 24.7027 16.14L24.6977 16.1325ZM17.1252 20.5275C16.9895 20.5775 16.8662 20.6564 16.7639 20.7587C16.6616 20.861 16.5827 20.9843 16.5327 21.12L14.0002 27.9813L11.4727 21.125C11.4228 20.9878 11.3434 20.8633 11.2402 20.76C11.1369 20.6568 11.0124 20.5774 10.8752 20.5275L4.01895 18L10.8752 15.4725C11.0124 15.4226 11.1369 15.3432 11.2402 15.24C11.3434 15.1367 11.4228 15.0122 11.4727 14.875L14.0002 8.01875L16.5277 14.875C16.5777 15.0107 16.6566 15.134 16.7589 15.2363C16.8612 15.3386 16.9845 15.4175 17.1202 15.4675L23.9814 18L17.1252 20.5275ZM18.0002 5C18.0002 4.73478 18.1056 4.48043 18.2931 4.29289C18.4806 4.10536 18.735 4 19.0002 4H21.0002V2C21.0002 1.73478 21.1056 1.48043 21.2931 1.29289C21.4806 1.10536 21.735 1 22.0002 1C22.2654 1 22.5198 1.10536 22.7073 1.29289C22.8948 1.48043 23.0002 1.73478 23.0002 2V4H25.0002C25.2654 4 25.5198 4.10536 25.7073 4.29289C25.8948 4.48043 26.0002 4.73478 26.0002 5C26.0002 5.26522 25.8948 5.51957 25.7073 5.70711C25.5198 5.89464 25.2654 6 25.0002 6H23.0002V8C23.0002 8.26522 22.8948 8.51957 22.7073 8.70711C22.5198 8.89464 22.2654 9 22.0002 9C21.735 9 21.4806 8.89464 21.2931 8.70711C21.1056 8.51957 21.0002 8.26522 21.0002 8V6H19.0002C18.735 6 18.4806 5.89464 18.2931 5.70711C18.1056 5.51957 18.0002 5.26522 18.0002 5ZM31.0002 11C31.0002 11.2652 30.8948 11.5196 30.7073 11.7071C30.5198 11.8946 30.2654 12 30.0002 12H29.0002V13C29.0002 13.2652 28.8948 13.5196 28.7073 13.7071C28.5198 13.8946 28.2654 14 28.0002 14C27.735 14 27.4806 13.8946 27.2931 13.7071C27.1056 13.5196 27.0002 13.2652 27.0002 13V12H26.0002C25.735 12 25.4806 11.8946 25.2931 11.7071C25.1056 11.5196 25.0002 11.2652 25.0002 11C25.0002 10.7348 25.1056 10.4804 25.2931 10.2929C25.4806 10.1054 25.735 10 26.0002 10H27.0002V9C27.0002 8.73478 27.1056 8.48043 27.2931 8.29289C27.4806 8.10536 27.735 8 28.0002 8C28.2654 8 28.5198 8.10536 28.7073 8.29289C28.8948 8.48043 29.0002 8.73478 29.0002 9V10H30.0002C30.2654 10 30.5198 10.1054 30.7073 10.2929C30.8948 10.4804 31.0002 10.7348 31.0002 11Z"
                  fill="#343330" />
              </svg>
              <p>Smart Reply</p>
            </div>
          </button>
        </div>


      </div>

      <!-- <form id="buddyForm">
    <h1>Buddy System</h1>
    <label for="buddyName">Buddy UUID:</label>
    <input type="text" id="uuid" name="uuid" required />

    <button type="submit" id="button">Add Buddy</button>
  </form>
  <div id="incomingRequests"></div>
  <div id="outgoingRequests"></div>

  <form id="acceptRejectForm">
    <h2>Accept/Reject Requests</h2>
    <label for="requestId">Request ID:</label>
    <input type="text" id="requestId" name="requestId" required />
    <button type="button" id="acceptButton">Accept</button>
    <button type="button" id="rejectButton">Reject</button>
  </form>

  <div id="friendsList">


    <div id="profileStatus"></div>

    <form id="matchProfileForm">
      <textarea name="bio" placeholder="bio"></textarea><br>

      <label><input type="checkbox" name="likesHiking" /> Hiking</label><br>
      <label><input type="checkbox" name="likesGardening" /> Gardening</label><br>
      <label><input type="checkbox" name="likesBoardGames" /> Board Games</label><br>
      <label><input type="checkbox" name="likesSinging" /> Singing</label><br>
      <label><input type="checkbox" name="likesReading" /> Reading</label><br>
      <label><input type="checkbox" name="likesWalking" /> Walking</label><br>
      <label><input type="checkbox" name="likesCooking" /> Cooking</label><br>
      <label><input type="checkbox" name="likesMovies" /> Movies</label><br>
      <label><input type="checkbox" name="likesTaiChi" /> Tai Chi</label><br>

      <button type="button" id="createProfileBtn">Create Profile</button>
      <button type="button" id="updateProfileBtn">Update Profile</button>
    </form>

    <button id="checkProfileBtn">Check Profile Exists</button>
    <button id="loadPotentialBtn">Load Potential Matches</button>

    <div id="potentialMatches"></div> -->


</body>

</html>